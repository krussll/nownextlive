<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Display</title>
    <style>
        #clock {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 8px 12px;
            background: rgba(0, 0, 0, 0.7);
            color: #ffffff;
            font-family: "Courier New", Courier, monospace;
            font-size: 1.25rem;
            border-radius: 6px;
            letter-spacing: 0.08em;
        }
    </style>
</head>
<body>
        <span id="now"></span>
        <span id="next"></span>
        <div id="clock" aria-live="polite"></div>
    </body>
    <script type="module">
        const now = document.getElementById("now")
        const next = document.getElementById("next")
        const clock = document.getElementById("clock")
        import { io } from "https://cdn.socket.io/4.8.1/socket.io.esm.min.js";

        const socket = io("http://localhost:3000");

        socket.on("connect", () => {
            console.log("connected");
            socket.emit("room-request", {room: "NDST3", role: "DISPLAY" })
        });

        socket.on("room-status", (d) => {
            console.log(d)
        });

        socket.on("update", (c) => {
            now.textContent = c.now;
            next.textContent = c.next;
        });

        const updateClock = () => {
            const nowDate = new Date();
            clock.textContent = nowDate.toLocaleTimeString([], {
                hour: "2-digit",
                minute: "2-digit",
                hour12: false,
            });
        };

        updateClock();
        setInterval(updateClock, 1000);

      </script>
</html>
